<!DOCTYPE html>
<html lang="en-US" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>QZD MVP — Goals &amp; Gap Analysis | QZD MVP Docs</title>
    <meta name="description" content="Documentation for the QZD MVP platform, covering architecture, operations, and API usage.">
    <meta name="generator" content="VitePress v1.6.4">
    <link rel="preload stylesheet" href="/qzd-mvp/assets/style.CxeMQLMn.css" as="style">
    <link rel="preload stylesheet" href="/qzd-mvp/vp-icons.css" as="style">
    
    <script type="module" src="/qzd-mvp/assets/app.CfcX8cFO.js"></script>
    <link rel="preload" href="/qzd-mvp/assets/inter-roman-latin.Di8DUHzh.woff2" as="font" type="font/woff2" crossorigin="">
    <link rel="modulepreload" href="/qzd-mvp/assets/chunks/theme.Dk4rEv2Z.js">
    <link rel="modulepreload" href="/qzd-mvp/assets/chunks/framework.B0i2KhIm.js">
    <link rel="modulepreload" href="/qzd-mvp/assets/qzd-goals-and-gap-analysis.md.DAzPBz6k.lean.js">
    <script id="check-dark-mode">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"auto",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
    <script id="check-mac-os">document.documentElement.classList.toggle("mac",/Mac|iPhone|iPod|iPad/i.test(navigator.platform));</script>
  </head>
  <body>
    <div id="app"><div class="Layout" data-v-8fcc703e><!--[--><!--]--><!--[--><span tabindex="-1" data-v-8839bf28></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-8839bf28>Skip to content</a><!--]--><!----><header class="VPNav" data-v-8fcc703e data-v-0936b04e><div class="VPNavBar" data-v-0936b04e data-v-21c47a32><div class="wrapper" data-v-21c47a32><div class="container" data-v-21c47a32><div class="title" data-v-21c47a32><div class="VPNavBarTitle has-sidebar" data-v-21c47a32 data-v-716cd2ac><a class="title" href="/qzd-mvp/" data-v-716cd2ac><!--[--><!--]--><!----><span data-v-716cd2ac>QZD MVP Docs</span><!--[--><!--]--></a></div></div><div class="content" data-v-21c47a32><div class="content-body" data-v-21c47a32><!--[--><!--]--><div class="VPNavBarSearch search" data-v-21c47a32><!--[--><!----><div id="local-search"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><span class="vp-icon DocSearch-Search-Icon"></span><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"><kbd class="DocSearch-Button-Key"></kbd><kbd class="DocSearch-Button-Key">K</kbd></span></button></div><!--]--></div><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-21c47a32 data-v-31e17bba><span id="main-nav-aria-label" class="visually-hidden" data-v-31e17bba> Main Navigation </span><!--[--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/qzd-mvp/" tabindex="0" data-v-31e17bba data-v-7a03800e><!--[--><span data-v-7a03800e>Home</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/qzd-mvp/architecture.html" tabindex="0" data-v-31e17bba data-v-7a03800e><!--[--><span data-v-7a03800e>Docs</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/qzd-mvp/api-readme.html" tabindex="0" data-v-31e17bba data-v-7a03800e><!--[--><span data-v-7a03800e>API</span><!--]--></a><!--]--><!--]--></nav><!----><div class="VPNavBarAppearance appearance" data-v-21c47a32 data-v-3e0655d9><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title aria-checked="false" data-v-3e0655d9 data-v-10d90534 data-v-f601b24a><span class="check" data-v-f601b24a><span class="icon" data-v-f601b24a><!--[--><span class="vpi-sun sun" data-v-10d90534></span><span class="vpi-moon moon" data-v-10d90534></span><!--]--></span></span></button></div><!----><div class="VPFlyout VPNavBarExtra extra" data-v-21c47a32 data-v-4067eb2d data-v-57f4b03a><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-57f4b03a><span class="vpi-more-horizontal icon" data-v-57f4b03a></span></button><div class="menu" data-v-57f4b03a><div class="VPMenu" data-v-57f4b03a data-v-96b60255><!----><!--[--><!--[--><!----><div class="group" data-v-4067eb2d><div class="item appearance" data-v-4067eb2d><p class="label" data-v-4067eb2d>Appearance</p><div class="appearance-action" data-v-4067eb2d><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title aria-checked="false" data-v-4067eb2d data-v-10d90534 data-v-f601b24a><span class="check" data-v-f601b24a><span class="icon" data-v-f601b24a><!--[--><span class="vpi-sun sun" data-v-10d90534></span><span class="vpi-moon moon" data-v-10d90534></span><!--]--></span></span></button></div></div></div><!----><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-21c47a32 data-v-cf54d2df><span class="container" data-v-cf54d2df><span class="top" data-v-cf54d2df></span><span class="middle" data-v-cf54d2df></span><span class="bottom" data-v-cf54d2df></span></span></button></div></div></div></div><div class="divider" data-v-21c47a32><div class="divider-line" data-v-21c47a32></div></div></div><!----></header><div class="VPLocalNav has-sidebar empty" data-v-8fcc703e data-v-1ba6b4e1><div class="container" data-v-1ba6b4e1><button class="menu" aria-expanded="false" aria-controls="VPSidebarNav" data-v-1ba6b4e1><span class="vpi-align-left menu-icon" data-v-1ba6b4e1></span><span class="menu-text" data-v-1ba6b4e1>Menu</span></button><div class="VPLocalNavOutlineDropdown" style="--vp-vh:0px;" data-v-1ba6b4e1 data-v-e22ae0bc><button data-v-e22ae0bc>Return to top</button><!----></div></div></div><aside class="VPSidebar" data-v-8fcc703e data-v-23e82374><div class="curtain" data-v-23e82374></div><nav class="nav" id="VPSidebarNav" aria-labelledby="sidebar-aria-label" tabindex="-1" data-v-23e82374><span class="visually-hidden" id="sidebar-aria-label" data-v-23e82374> Sidebar Navigation </span><!--[--><!--]--><!--[--><div class="no-transition group" data-v-084608f4><section class="VPSidebarItem level-0 has-active" data-v-084608f4 data-v-374da722><div class="item" role="button" tabindex="0" data-v-374da722><div class="indicator" data-v-374da722></div><h2 class="text" data-v-374da722>Overview</h2><!----></div><div class="items" data-v-374da722><!--[--><div class="VPSidebarItem level-1 is-link" data-v-374da722 data-v-374da722><div class="item" data-v-374da722><div class="indicator" data-v-374da722></div><a class="VPLink link link" href="/qzd-mvp/" data-v-374da722><!--[--><p class="text" data-v-374da722>Introduction</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-374da722 data-v-374da722><div class="item" data-v-374da722><div class="indicator" data-v-374da722></div><a class="VPLink link link" href="/qzd-mvp/architecture.html" data-v-374da722><!--[--><p class="text" data-v-374da722>Architecture</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-374da722 data-v-374da722><div class="item" data-v-374da722><div class="indicator" data-v-374da722></div><a class="VPLink link link" href="/qzd-mvp/qzd-goals-and-gap-analysis.html" data-v-374da722><!--[--><p class="text" data-v-374da722>Goals & Gap Analysis</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-374da722 data-v-374da722><div class="item" data-v-374da722><div class="indicator" data-v-374da722></div><a class="VPLink link link" href="/qzd-mvp/deployment-single-server.html" data-v-374da722><!--[--><p class="text" data-v-374da722>Deployment (Single Server)</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-374da722 data-v-374da722><div class="item" data-v-374da722><div class="indicator" data-v-374da722></div><a class="VPLink link link" href="/qzd-mvp/runbook.html" data-v-374da722><!--[--><p class="text" data-v-374da722>Operations Runbook</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-084608f4><section class="VPSidebarItem level-0 collapsible" data-v-084608f4 data-v-374da722><div class="item" role="button" tabindex="0" data-v-374da722><div class="indicator" data-v-374da722></div><h2 class="text" data-v-374da722>Manuals</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-374da722><span class="vpi-chevron-right caret-icon" data-v-374da722></span></div></div><div class="items" data-v-374da722><!--[--><div class="VPSidebarItem level-1 is-link" data-v-374da722 data-v-374da722><div class="item" data-v-374da722><div class="indicator" data-v-374da722></div><a class="VPLink link link" href="/qzd-mvp/manuals/wallet-user.html" data-v-374da722><!--[--><p class="text" data-v-374da722>Wallet User Manual</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-374da722 data-v-374da722><div class="item" data-v-374da722><div class="indicator" data-v-374da722></div><a class="VPLink link link" href="/qzd-mvp/manuals/admin-operator.html" data-v-374da722><!--[--><p class="text" data-v-374da722>Admin Operator Manual</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-374da722 data-v-374da722><div class="item" data-v-374da722><div class="indicator" data-v-374da722></div><a class="VPLink link link" href="/qzd-mvp/manuals/merchant-operator.html" data-v-374da722><!--[--><p class="text" data-v-374da722>Merchant Operator Manual</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-374da722 data-v-374da722><div class="item" data-v-374da722><div class="indicator" data-v-374da722></div><a class="VPLink link link" href="/qzd-mvp/manuals/sms-operator.html" data-v-374da722><!--[--><p class="text" data-v-374da722>SMS Operator Manual</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-084608f4><section class="VPSidebarItem level-0" data-v-084608f4 data-v-374da722><div class="item" role="button" tabindex="0" data-v-374da722><div class="indicator" data-v-374da722></div><h2 class="text" data-v-374da722>Contributing & API</h2><!----></div><div class="items" data-v-374da722><!--[--><div class="VPSidebarItem level-1 is-link" data-v-374da722 data-v-374da722><div class="item" data-v-374da722><div class="indicator" data-v-374da722></div><a class="VPLink link link" href="/qzd-mvp/contrib.html" data-v-374da722><!--[--><p class="text" data-v-374da722>Contributor Guide</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-374da722 data-v-374da722><div class="item" data-v-374da722><div class="indicator" data-v-374da722></div><a class="VPLink link link" href="/qzd-mvp/api-readme.html" data-v-374da722><!--[--><p class="text" data-v-374da722>API Overview</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><!--]--><!--[--><!--]--></nav></aside><div class="VPContent has-sidebar" id="VPContent" data-v-8fcc703e data-v-9082a1e0><div class="VPDoc has-sidebar has-aside" data-v-9082a1e0 data-v-023312b8><!--[--><!--]--><div class="container" data-v-023312b8><div class="aside" data-v-023312b8><div class="aside-curtain" data-v-023312b8></div><div class="aside-container" data-v-023312b8><div class="aside-content" data-v-023312b8><div class="VPDocAside" data-v-023312b8 data-v-8ddfe375><!--[--><!--]--><!--[--><!--]--><nav aria-labelledby="doc-outline-aria-label" class="VPDocAsideOutline" data-v-8ddfe375 data-v-3b76ecf8><div class="content" data-v-3b76ecf8><div class="outline-marker" data-v-3b76ecf8></div><div aria-level="2" class="outline-title" id="doc-outline-aria-label" role="heading" data-v-3b76ecf8>On this page</div><ul class="VPDocOutlineItem root" data-v-3b76ecf8 data-v-7544b7f0><!--[--><!--]--></ul></div></nav><!--[--><!--]--><div class="spacer" data-v-8ddfe375></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-023312b8><div class="content-container" data-v-023312b8><!--[--><!--]--><main class="main" data-v-023312b8><div style="position:relative;" class="vp-doc _qzd-mvp_qzd-goals-and-gap-analysis" data-v-023312b8><div><h2 id="executive-summary" tabindex="-1">Executive Summary <a class="header-anchor" href="#executive-summary" aria-label="Permalink to &quot;Executive Summary&quot;">​</a></h2><ul><li>Quetzal Digital (QZD) ships as a pnpm monorepo with defined API, wallet, admin, merchant, and simulator apps plus shared packages, already documented in the architecture overview.【F:docs/architecture.md†L1-L42】</li><li>The OpenAPI contract enumerates customer, remittance, admin, agent, offline, and observability endpoints, giving a strong API-first baseline for the MVP.【F:openapi/openapi.yaml†L1-L158】</li><li>A NestJS API, in-memory banking service, and React frontends demonstrate end-to-end registration, transfers, issuance, and voucher flows via generated SDKs; however, they operate without real persistence or integration rails.【F:apps/api/src/app.module.ts†L1-L15】【F:apps/api/src/in-memory-bank.service.ts†L83-L196】【F:apps/wallet-web/src/App.tsx†L1-L200】【F:apps/admin-web/src/App.tsx†L1-L199】</li><li>Docker Compose, observability scaffolding, and CI workflows cover local orchestration, metrics, and automated tests (contract, API e2e, UI smoke), but production-grade deployment tooling (path-based Nginx, secrets, migrations) remains aspirational.【F:docker-compose.yaml†L1-L153】【F:apps/api/src/observability/metrics.ts†L1-L27】【F:.github/workflows/ci.yml†L1-L240】</li><li>To reach a functional, externally demo-able MVP we must harden persistence, security, AML/KYC enforcement, issuance approvals, offline redemption, and ops posture beyond the current in-memory, single-process demo implementations.【F:apps/api/src/in-memory-bank.service.ts†L83-L196】【F:apps/api/src/remittances.service.ts†L1-L120】</li><li>Highest-priority gaps include production-ready data storage, identity verification tiers, remittance fee settlement, multi-channel distribution, and deployment hardening to serve wallet/admin/POS/docs behind one domain with TLS.【F:docs/deployment-single-server.md†L3-L120】【F:apps/merchant-pos/src/App.tsx†L1-L160】</li></ul><h2 id="current-state-what-exists" tabindex="-1">Current State (What Exists) <a class="header-anchor" href="#current-state-what-exists" aria-label="Permalink to &quot;Current State (What Exists)&quot;">​</a></h2><table tabindex="0"><thead><tr><th>Area</th><th>Status</th><th>Evidence</th><th>Notes</th></tr></thead><tbody><tr><td>OpenAPI specification</td><td>Present</td><td>【F:openapi/openapi.yaml†L1-L158】</td><td>Comprehensive contract for auth, accounts, transactions, remittances, admin, agents, offline, SMS, and health endpoints.</td></tr><tr><td>Backend (NestJS API)</td><td>Present (demo-grade)</td><td>【F:apps/api/src/app.module.ts†L1-L15】【F:apps/api/src/in-memory-bank.service.ts†L83-L196】</td><td>API wires generated controllers to an in-memory bank service implementing accounts, issuance, vouchers, AML alerts, and offline vouchers with no external persistence.</td></tr><tr><td>Remittance &amp; issuance logic</td><td>Present (simulated)</td><td>【F:apps/api/src/remittances.service.ts†L1-L120】</td><td>Ledger-backed remittance issuance with hard-coded validators, FX/fee scenarios, and synthetic multi-sig.</td></tr><tr><td>Wallet web app</td><td>Present</td><td>【F:apps/wallet-web/src/App.tsx†L1-L200】</td><td>React SPA supports registration/login, balance retrieval, transfers, remittance quotes, and offline voucher redemption via browser SDK.</td></tr><tr><td>Admin console</td><td>Present</td><td>【F:apps/admin-web/src/App.tsx†L1-L199】</td><td>React SPA handles issuance queue, validator signing, voucher reconciliation; relies on manual token entry and demo signing keys.</td></tr><tr><td>Merchant POS</td><td>Present</td><td>【F:apps/merchant-pos/src/App.tsx†L1-L160】</td><td>React POS issues invoices, renders QR codes/PDFs, polls transactions using SDK; assumes demo auth and lacks settlement hooks.</td></tr><tr><td>SMS simulator</td><td>Present</td><td>【F:docs/architecture.md†L16-L19】</td><td>CLI described in docs; implementation resides in repo (not inspected here).</td></tr><tr><td>Shared packages</td><td>Present</td><td>【F:docs/architecture.md†L21-L30】【F:packages/ledger/src/index.ts†L1-L80】</td><td>Shared Zod schemas, append-only ledger, SDK wrappers, and card mock utilities enable API/UI parity.</td></tr><tr><td>Docker Compose</td><td>Present (dev-focused)</td><td>【F:docker-compose.yaml†L1-L153】</td><td>Spins up Postgres, API, wallet/admin dev servers, SMS simulator, Prism mock, docs server, Prometheus, Grafana; lacks production images and proxy.</td></tr><tr><td>Nginx path routing</td><td>Missing</td><td>【F:docs/deployment-single-server.md†L3-L120】</td><td>Deployment guide defines desired proxy, but repo lacks a consolidated Nginx config or automation to apply it.</td></tr><tr><td>Tests (unit/e2e/UI)</td><td>Present</td><td>【F:apps/api/src/admin-alerts.e2e.spec.ts†L1-L160】【F:tests/ui/wallet-smoke.spec.ts†L1-L50】</td><td>Vitest API e2e suites cover AML alerts, issuance, flows; Playwright smoke tests exercise wallet UI.</td></tr><tr><td>CI/CD workflows</td><td>Present (comprehensive)</td><td>【F:.github/workflows/ci.yml†L1-L320】</td><td>Pipeline enforces spec lint/diff, contract tests, unit coverage, API e2e, accessibility, wallet smoke; no deploy stage.</td></tr><tr><td>Observability</td><td>Partial</td><td>【F:apps/api/src/observability/metrics.ts†L1-L27】【F:ops/prometheus/prometheus.yml†L1-L13】【F:ops/grafana/datasources/prometheus.yml†L1-L9】</td><td>Metrics controller, Prometheus scrape config, Grafana datasource exist; dashboards absent.</td></tr><tr><td>Documentation</td><td>Present</td><td>【F:docs/index.md†L1-L40】【F:docs/deployment-single-server.md†L3-L160】</td><td>VitePress site with architecture, deployment, manuals, runbooks; Redoc served statically.</td></tr></tbody></table><h2 id="definition-of-functional-product-for-mvp" tabindex="-1">Definition of “Functional Product” for MVP <a class="header-anchor" href="#definition-of-functional-product-for-mvp" aria-label="Permalink to &quot;Definition of “Functional Product” for MVP&quot;">​</a></h2><p>To demo an end-to-end CBDC remittance, the MVP must allow a user to acquire QZD with test funds, send to a recipient wallet, and cash out via an agent while KYC/AML limits and alerting function, issuance approvals require multi-sig, docs/mock APIs are public, and the stack deploys under one TLS-protected domain with path routing across /api, /wallet, /admin, /pos, and /docs.【F:apps/wallet-web/src/App.tsx†L1-L200】【F:apps/admin-web/src/App.tsx†L1-L199】【F:apps/api/src/remittances.service.ts†L1-L120】【F:docs/deployment-single-server.md†L3-L120】</p><h2 id="gap-analysis-what-s-missing-why-it-matters" tabindex="-1">Gap Analysis (What’s Missing &amp; Why It Matters) <a class="header-anchor" href="#gap-analysis-what-s-missing-why-it-matters" aria-label="Permalink to &quot;Gap Analysis (What’s Missing &amp; Why It Matters)&quot;">​</a></h2><h3 id="oas3-codegen" tabindex="-1">OAS3 &amp; Codegen <a class="header-anchor" href="#oas3-codegen" aria-label="Permalink to &quot;OAS3 &amp; Codegen&quot;">​</a></h3><ul><li><strong>Gap:</strong> Spec lacks production deployment alignment (server URLs, auth scopes) and example parity with real limits. <ul><li><strong>Impact:</strong> Blocks accurate SDK/client behaviour and partner integrations.</li><li><strong>Evidence:</strong> Spec references sandbox/production URLs but no versioned change log or auth scope definitions.【F:openapi/openapi.yaml†L1-L40】</li><li><strong>Suggested fix:</strong> Finalize environment matrix, document auth flows (KYC tiers, agent roles), and generate changelog.</li><li><strong>Effort:</strong> M</li><li><strong>Priority:</strong> P1</li></ul></li></ul><h3 id="backend-services" tabindex="-1">Backend Services <a class="header-anchor" href="#backend-services" aria-label="Permalink to &quot;Backend Services&quot;">​</a></h3><ul><li><strong>Gap:</strong> No persistent data store or ORM; all state in-memory. <ul><li><strong>Impact:</strong> Prevents multi-instance deployment, data durability, compliance.</li><li><strong>Evidence:</strong> App module wires only <code>InMemoryBankService</code>; no database modules used.【F:apps/api/src/app.module.ts†L1-L15】</li><li><strong>Suggested fix:</strong> Introduce Postgres schema with migration tooling, replace in-memory service with repository layer.</li><li><strong>Effort:</strong> L</li><li><strong>Priority:</strong> P0</li></ul></li><li><strong>Gap:</strong> AML/KYC rules are demo heuristics without audit persistence. <ul><li><strong>Impact:</strong> Cannot satisfy regulatory reporting or override flows.</li><li><strong>Evidence:</strong> Threshold constants for structuring/velocity defined inline with no persistence of events beyond memory.【F:apps/api/src/in-memory-bank.service.ts†L126-L196】</li><li><strong>Suggested fix:</strong> Externalize rules engine, persist alerts, add review states.</li><li><strong>Effort:</strong> M</li><li><strong>Priority:</strong> P0</li></ul></li></ul><h3 id="wallet-uis" tabindex="-1">Wallet UIs <a class="header-anchor" href="#wallet-uis" aria-label="Permalink to &quot;Wallet UIs&quot;">​</a></h3><ul><li><strong>Gap:</strong> Wallet requires manual account ID entry and lacks guided onboarding or remittance rails. <ul><li><strong>Impact:</strong> Demo friction; not representative of production user journey.</li><li><strong>Evidence:</strong> UI expects user to paste account IDs and tokens manually.【F:apps/wallet-web/src/App.tsx†L87-L200】</li><li><strong>Suggested fix:</strong> Add authenticated session storage, auto-fetch account, integrate remittance purchase flow.</li><li><strong>Effort:</strong> M</li><li><strong>Priority:</strong> P1</li></ul></li></ul><h3 id="admin-issuance" tabindex="-1">Admin/Issuance <a class="header-anchor" href="#admin-issuance" aria-label="Permalink to &quot;Admin/Issuance&quot;">​</a></h3><ul><li><strong>Gap:</strong> Admin console depends on manual token input and hard-coded validator list. <ul><li><strong>Impact:</strong> Multi-sig issuance not secured; no role-based access.</li><li><strong>Evidence:</strong> Admin UI asks for token, enumerates validators array.【F:apps/admin-web/src/App.tsx†L17-L199】</li><li><strong>Suggested fix:</strong> Implement auth flow with admin login, validator key management, signature auditing.</li><li><strong>Effort:</strong> M</li><li><strong>Priority:</strong> P0</li></ul></li></ul><h3 id="pos" tabindex="-1">POS <a class="header-anchor" href="#pos" aria-label="Permalink to &quot;POS&quot;">​</a></h3><ul><li><strong>Gap:</strong> POS lacks settlement integration and relies on manual registration. <ul><li><strong>Impact:</strong> Merchants cannot reconcile with real cash-out or receipts.</li><li><strong>Evidence:</strong> POS registers users via API and polls transactions; no payout channels.【F:apps/merchant-pos/src/App.tsx†L1-L160】</li><li><strong>Suggested fix:</strong> Connect to agent payout API, persistent merchant accounts, ledger reconciliation.</li><li><strong>Effort:</strong> M</li><li><strong>Priority:</strong> P1</li></ul></li></ul><h3 id="kyc-aml" tabindex="-1">KYC/AML <a class="header-anchor" href="#kyc-aml" aria-label="Permalink to &quot;KYC/AML&quot;">​</a></h3><ul><li><strong>Gap:</strong> No external KYC provider or document handling; tiers simulated only. <ul><li><strong>Impact:</strong> Cannot satisfy regulatory onboarding.</li><li><strong>Evidence:</strong> <code>updateAccountKyc</code> handled in-memory; no document storage or verification pipeline.【F:apps/api/src/in-memory-bank.service.ts†L83-L140】</li><li><strong>Suggested fix:</strong> Integrate KYC provider, store evidence, enforce tier limits server-side.</li><li><strong>Effort:</strong> L (for integration) to M (for workflows)</li><li><strong>Priority:</strong> P0</li></ul></li></ul><h3 id="remittance-rails-fees" tabindex="-1">Remittance Rails &amp; Fees <a class="header-anchor" href="#remittance-rails-fees" aria-label="Permalink to &quot;Remittance Rails &amp; Fees&quot;">​</a></h3><ul><li><strong>Gap:</strong> Acquisition uses fixed FX and fees without funding rails. <ul><li><strong>Impact:</strong> Cannot demonstrate real remittance cost savings.</li><li><strong>Evidence:</strong> Remittance service hard-codes FX ratio and validators.【F:apps/api/src/remittances.service.ts†L1-L60】</li><li><strong>Suggested fix:</strong> Connect to sandbox remittance provider, dynamic FX feeds, configurable tariffs.</li><li><strong>Effort:</strong> L-M</li><li><strong>Priority:</strong> P1</li></ul></li></ul><h3 id="offline-physical" tabindex="-1">Offline/Physical <a class="header-anchor" href="#offline-physical" aria-label="Permalink to &quot;Offline/Physical&quot;">​</a></h3><ul><li><strong>Gap:</strong> Offline vouchers/cards simulated only; no hardware workflows. <ul><li><strong>Impact:</strong> Physical resilience scenario remains theoretical.</li><li><strong>Evidence:</strong> Card mock utilities generate vouchers without device provisioning.【F:packages/card-mock/src/index.ts†L1-L73】</li><li><strong>Suggested fix:</strong> Define card personalization flow, secure key management, offline redemption audit.</li><li><strong>Effort:</strong> L</li><li><strong>Priority:</strong> P2</li></ul></li></ul><h3 id="security-keys" tabindex="-1">Security &amp; Keys <a class="header-anchor" href="#security-keys" aria-label="Permalink to &quot;Security &amp; Keys&quot;">​</a></h3><ul><li><strong>Gap:</strong> Request signing keys, validator secrets, and JWT secrets unmanaged. <ul><li><strong>Impact:</strong> Cannot operate securely in shared environments.</li><li><strong>Evidence:</strong> Demo defaults for signing keys across apps; no secret management integration.【F:apps/wallet-web/src/App.tsx†L17-L33】【F:apps/admin-web/src/App.tsx†L11-L22】</li><li><strong>Suggested fix:</strong> Provision secret store (Vault/SSM), rotate keys, enforce env-based configuration.</li><li><strong>Effort:</strong> M</li><li><strong>Priority:</strong> P0</li></ul></li></ul><h3 id="observability" tabindex="-1">Observability <a class="header-anchor" href="#observability" aria-label="Permalink to &quot;Observability&quot;">​</a></h3><ul><li><strong>Gap:</strong> No Grafana dashboards or alerting rules. <ul><li><strong>Impact:</strong> Ops teams lack actionable visibility.</li><li><strong>Evidence:</strong> Prometheus scrape config exists; Grafana datasource only.【F:ops/prometheus/prometheus.yml†L1-L13】【F:ops/grafana/datasources/prometheus.yml†L1-L9】</li><li><strong>Suggested fix:</strong> Define dashboards for transactions, AML alerts, issuance queue; add alertmanager config.</li><li><strong>Effort:</strong> S</li><li><strong>Priority:</strong> P1</li></ul></li></ul><h3 id="testing-step-19" tabindex="-1">Testing (Step #19) <a class="header-anchor" href="#testing-step-19" aria-label="Permalink to &quot;Testing (Step #19)&quot;">​</a></h3><ul><li><strong>Gap:</strong> Tests run against in-memory state; no DB migrations or rate-limit tests. <ul><li><strong>Impact:</strong> Fails to cover persistence, concurrency, replay, or quota handling.</li><li><strong>Evidence:</strong> CI runs contract, unit, API e2e, wallet smoke; no DB-specific steps.【F:.github/workflows/ci.yml†L1-L320】</li><li><strong>Suggested fix:</strong> Extend suites with Postgres migrations, rate-limit, replay, and AML scenario coverage once persistence lands.</li><li><strong>Effort:</strong> M</li><li><strong>Priority:</strong> P0</li></ul></li></ul><h3 id="devex-ci-cd" tabindex="-1">DevEx &amp; CI/CD <a class="header-anchor" href="#devex-ci-cd" aria-label="Permalink to &quot;DevEx &amp; CI/CD&quot;">​</a></h3><ul><li><strong>Gap:</strong> No automated image builds/deploy or environment promotion. <ul><li><strong>Impact:</strong> Manual deploy risk, inconsistent environments.</li><li><strong>Evidence:</strong> CI lacks build/publish stages for production beyond tests.【F:.github/workflows/ci.yml†L1-L320】</li><li><strong>Suggested fix:</strong> Add build pipeline, container image publishing, staged deploy workflows.</li><li><strong>Effort:</strong> M</li><li><strong>Priority:</strong> P1</li></ul></li></ul><h3 id="docs-api-reference" tabindex="-1">Docs &amp; API Reference <a class="header-anchor" href="#docs-api-reference" aria-label="Permalink to &quot;Docs &amp; API Reference&quot;">​</a></h3><ul><li><strong>Gap:</strong> Docs describe desired state but lack gap-tracking updates. <ul><li><strong>Impact:</strong> Stakeholders may assume features exist.</li><li><strong>Evidence:</strong> Architecture doc presents Postgres-backed deployments despite in-memory reality.【F:docs/architecture.md†L8-L40】</li><li><strong>Suggested fix:</strong> Update docs to distinguish demo vs production-ready capabilities until gaps close.</li><li><strong>Effort:</strong> S</li><li><strong>Priority:</strong> P1</li></ul></li></ul><h3 id="ops-nginx-tls-backups" tabindex="-1">Ops (Nginx/TLS/Backups) <a class="header-anchor" href="#ops-nginx-tls-backups" aria-label="Permalink to &quot;Ops (Nginx/TLS/Backups)&quot;">​</a></h3><ul><li><strong>Gap:</strong> No live Nginx config, backup scripts, or zero-downtime deploy automation. <ul><li><strong>Impact:</strong> Production deployment remains manual and fragile.</li><li><strong>Evidence:</strong> Deployment guide outlines goals; compose lacks proxy/backups.【F:docs/deployment-single-server.md†L3-L160】【F:docker-compose.yaml†L1-L153】</li><li><strong>Suggested fix:</strong> Commit production compose overrides, Nginx config, backup cron jobs, blue/green compose flow.</li><li><strong>Effort:</strong> M</li><li><strong>Priority:</strong> P0</li></ul></li></ul><h2 id="prioritized-backlog-actionable" tabindex="-1">Prioritized Backlog (Actionable) <a class="header-anchor" href="#prioritized-backlog-actionable" aria-label="Permalink to &quot;Prioritized Backlog (Actionable)&quot;">​</a></h2><table tabindex="0"><thead><tr><th>Epic</th><th>Task</th><th>Acceptance Criteria</th><th>Owner</th><th>Unblocks</th></tr></thead><tbody><tr><td>Persistent Core Services</td><td>Implement Postgres schema &amp; migrations replacing in-memory bank</td><td>API bootstraps with Postgres, migrations run in CI, e2e tests persist data across restarts</td><td>Backend</td><td>Most other P0 items</td></tr><tr><td>Persistent Core Services</td><td>Wire repositories for accounts, transactions, alerts, vouchers</td><td>All CRUD endpoints operate via Postgres with optimistic locking; AML alerts stored for audit</td><td>Backend</td><td>KYC/AML, Issuance</td></tr><tr><td>Secure Admin &amp; Issuance</td><td>Add admin auth service with role-based JWTs and validator key storage</td><td>Admin login via UI; validator signatures recorded with key rotation policy</td><td>Backend/Frontend</td><td>Multi-sig compliance</td></tr><tr><td>Secure Admin &amp; Issuance</td><td>Update admin UI for session handling, validator assignment UI</td><td>Admin can log in, view issuance queue, sign, escalate; acceptance via Playwright regression</td><td>Frontend</td><td>-</td></tr><tr><td>Remittance Rails</td><td>Integrate FX feed and remittance funding sandbox</td><td>Quotes use live FX, fee schedule configurable; acquisition reconciles funding ledger entry</td><td>Backend</td><td>Demo credibility</td></tr><tr><td>Wallet UX Refresh</td><td>Simplify onboarding (auto account linking) &amp; guided remittance send</td><td>Wallet auto fetches user account post-login; remittance flow completes without manual IDs</td><td>Frontend</td><td>Demo polish</td></tr><tr><td>Ops Hardening</td><td>Add Nginx reverse proxy config + TLS automation to repo</td><td><code>docker compose -f prod.yml up</code> exposes /api,/wallet,/admin,/pos,/docs via HTTPS</td><td>DevOps</td><td>Launch readiness</td></tr><tr><td>Ops Hardening</td><td>Define backup/restore scripts for Postgres &amp; secrets</td><td>Documented runbook; CI smoke verifies backup artifacts</td><td>DevOps</td><td>Compliance</td></tr><tr><td>Observability</td><td>Publish Grafana dashboards &amp; alert rules for key KPIs</td><td>Dashboards versioned in repo; alertmanager config triggers on AML bursts, issuance backlog</td><td>DevOps</td><td>Ops readiness</td></tr><tr><td>Testing Step #19</td><td>Extend suites for DB migrations, rate limits, replay, AML scenarios</td><td>CI includes new jobs with fixtures, fails on regressions</td><td>QA/Backend</td><td>Quality gates</td></tr></tbody></table><h2 id="testing-strategy-step-19-–-concrete-next-steps" tabindex="-1">Testing Strategy (Step #19) – Concrete Next Steps <a class="header-anchor" href="#testing-strategy-step-19-–-concrete-next-steps" aria-label="Permalink to &quot;Testing Strategy (Step #19) – Concrete Next Steps&quot;">​</a></h2><ul><li>Stand up Postgres-backed contract tests and ensure Prism mock parity for all P0 endpoints once persistence lands.【F:docker-compose.yaml†L1-L90】【F:.github/workflows/ci.yml†L1-L240】</li><li>Enforce <code>pnpm oas:lint</code> and <code>oasdiff</code> in CI (already present) with spec drift blocking merges; add diff-to-main reports in PR templates.【F:.github/workflows/ci.yml†L1-L60】</li><li>Add Vitest suites for ledger math (transfers, fees, issuance) against new persistence layer.【F:packages/ledger/src/index.ts†L1-L80】</li><li>Run API e2e against ephemeral DB containers with migrations applied before tests.【F:.github/workflows/ci.yml†L120-L200】</li><li>Implement idempotency/replay protection tests via repeated transfer requests and transaction journals.【F:apps/api/src/in-memory-bank.service.ts†L138-L172】</li><li>Add rate-limit coverage for request security middleware once backed by persistent counters.【F:apps/api/src/in-memory-bank.service.ts†L198-L200】</li><li>Extend AML tests to cover structuring, velocity, new-account bursts with persisted audit logs.【F:apps/api/src/admin-alerts.e2e.spec.ts†L82-L160】</li><li>Expand Playwright suites to cover admin flows after secure auth refactor.【F:tests/ui/wallet-smoke.spec.ts†L1-L50】</li><li>Configure coverage thresholds and gating for new persistence modules in CI.【F:.github/workflows/ci.yml†L80-L200】</li></ul><h2 id="deployment-ops-readiness" tabindex="-1">Deployment &amp; Ops Readiness <a class="header-anchor" href="#deployment-ops-readiness" aria-label="Permalink to &quot;Deployment &amp; Ops Readiness&quot;">​</a></h2><ul><li>Commit production Docker Compose overlays with versioned images, Postgres volumes, and integrated Nginx reverse proxy to expose /api, /wallet, /admin, /pos, /docs under one TLS domain.【F:docs/deployment-single-server.md†L3-L160】</li><li>Package Prometheus and Grafana configs (dashboards, alerts) to monitor API <code>/metrics</code>, AML alerts, issuance backlog.【F:ops/prometheus/prometheus.yml†L1-L13】</li><li>Document and automate Postgres backups (pg_dump + WAL archiving) with restore drills; integrate secrets management for signing keys and JWT secrets.【F:docker-compose.yaml†L1-L90】【F:apps/wallet-web/src/App.tsx†L17-L33】</li><li>Establish zero-downtime deployment workflow (<code>docker compose pull &amp;&amp; docker compose up -d</code>) with health checks to guard cutovers.【F:docs/deployment-single-server.md†L3-L120】</li></ul><h2 id="security-compliance-notes" tabindex="-1">Security &amp; Compliance Notes <a class="header-anchor" href="#security-compliance-notes" aria-label="Permalink to &quot;Security &amp; Compliance Notes&quot;">​</a></h2><ul><li>Harden request-signing key exchange and storage; all SPAs currently share dev keys bundled in source, unacceptable for production.【F:apps/wallet-web/src/App.tsx†L17-L33】【F:apps/admin-web/src/App.tsx†L11-L22】</li><li>Implement secure multi-sig issuance with validator quorum persisted and auditable beyond hard-coded keys.【F:apps/api/src/remittances.service.ts†L16-L60】</li><li>Persist KYC documents, tier decisions, and AML alerts with immutable audit logs and retention policies.【F:apps/api/src/in-memory-bank.service.ts†L83-L196】</li><li>Enforce rate limits, anomaly detection, and agent cash in/out monitoring via centralized services rather than in-process state.【F:apps/api/src/in-memory-bank.service.ts†L138-L200】</li></ul><h2 id="risks-dependencies-open-questions" tabindex="-1">Risks, Dependencies, Open Questions <a class="header-anchor" href="#risks-dependencies-open-questions" aria-label="Permalink to &quot;Risks, Dependencies, Open Questions&quot;">​</a></h2><ul><li><strong>External partners:</strong> Need agreements and sandbox access for remittance FX providers, agent networks, and identity vendors; current stack stubs these integrations.【F:apps/api/src/remittances.service.ts†L1-L60】</li><li><strong>Regulatory assumptions:</strong> Architecture docs presume Banguat-backed issuance with Postgres persistence and official docs; confirm data residency and audit requirements.【F:docs/architecture.md†L8-L40】</li><li><strong>Offline readiness:</strong> Physical voucher/card workflows rely on mock keypairs; hardware personalization, secure storage, and offline agent reconciliation remain undefined.【F:packages/card-mock/src/index.ts†L1-L73】</li><li><strong>Performance:</strong> In-memory implementation hides latency/scale concerns; need load testing once Postgres &amp; Nginx proxies are added.【F:docker-compose.yaml†L1-L90】</li><li><strong>Open questions:</strong> How will embassy outposts and kiosks integrate? What are acceptable remittance fee subsidies? Who manages validator keys and quorum policies? How are AML escalations handled cross-agency? (Inputs required from Banguat/SENACYT/Ministry of Economy.)</li></ul><h2 id="appendix" tabindex="-1">Appendix <a class="header-anchor" href="#appendix" aria-label="Permalink to &quot;Appendix&quot;">​</a></h2><ul><li><strong>Specifications:</strong> <code>openapi/openapi.yaml</code> (primary API contract).【F:openapi/openapi.yaml†L1-L158】</li><li><strong>Backend reference:</strong> <code>apps/api/src/in-memory-bank.service.ts</code> (current domain logic), <code>apps/api/src/remittances.service.ts</code> (remittance ledger).【F:apps/api/src/in-memory-bank.service.ts†L83-L196】【F:apps/api/src/remittances.service.ts†L1-L120】</li><li><strong>Frontends:</strong> Wallet/Admin/POS SPA entry points demonstrate SDK usage and UI flows.【F:apps/wallet-web/src/App.tsx†L1-L200】【F:apps/admin-web/src/App.tsx†L1-L199】【F:apps/merchant-pos/src/App.tsx†L1-L160】</li><li><strong>Testing harnesses:</strong> Vitest e2e specs for alerts/flows and Playwright smoke located under <code>apps/api/src/*.e2e.spec.ts</code> and <code>tests/ui</code>.【F:apps/api/src/admin-alerts.e2e.spec.ts†L1-L160】【F:tests/ui/wallet-smoke.spec.ts†L1-L50】</li><li><strong>Operational tooling:</strong> <code>docker-compose.yaml</code>, Prometheus/Grafana configs, deployment guide for single-server path routing.【F:docker-compose.yaml†L1-L153】【F:ops/prometheus/prometheus.yml†L1-L13】【F:docs/deployment-single-server.md†L3-L160】</li></ul></div></div></main><footer class="VPDocFooter" data-v-023312b8 data-v-ae165dd4><!--[--><!--]--><div class="edit-info" data-v-ae165dd4><!----><div class="last-updated" data-v-ae165dd4><p class="VPLastUpdated" data-v-ae165dd4 data-v-737b2217>Last updated: <time datetime="2025-10-03T00:35:14.000Z" data-v-737b2217></time></p></div></div><nav class="prev-next" aria-labelledby="doc-footer-aria-label" data-v-ae165dd4><span class="visually-hidden" id="doc-footer-aria-label" data-v-ae165dd4>Pager</span><div class="pager" data-v-ae165dd4><a class="VPLink link pager-link prev" href="/qzd-mvp/architecture.html" data-v-ae165dd4><!--[--><span class="desc" data-v-ae165dd4>Previous page</span><span class="title" data-v-ae165dd4>Architecture</span><!--]--></a></div><div class="pager" data-v-ae165dd4><a class="VPLink link pager-link next" href="/qzd-mvp/deployment-single-server.html" data-v-ae165dd4><!--[--><span class="desc" data-v-ae165dd4>Next page</span><span class="title" data-v-ae165dd4>Deployment (Single Server)</span><!--]--></a></div></nav></footer><!--[--><!--]--></div></div></div><!--[--><!--]--></div></div><!----><!--[--><!--]--></div></div>
    <script>window.__VP_HASH_MAP__=JSON.parse("{\"api-readme.md\":\"BcXqdIi3\",\"architecture.md\":\"ClxbP_Ke\",\"contrib.md\":\"CsPl2B6e\",\"deployment-single-server.md\":\"DdsuK7Er\",\"index.md\":\"DXvbScJd\",\"manuals_admin-operator.md\":\"I36Qb5Zm\",\"manuals_merchant-operator.md\":\"M868TPU_\",\"manuals_sms-operator.md\":\"CWjIdlTM\",\"manuals_wallet-user.md\":\"CH0l_SfM\",\"qzd-goals-and-gap-analysis.md\":\"DAzPBz6k\",\"runbook.md\":\"DwhfoAhm\",\"ui-review-checklist.md\":\"ADKltsZ-\"}");window.__VP_SITE_DATA__=JSON.parse("{\"lang\":\"en-US\",\"dir\":\"ltr\",\"title\":\"QZD MVP Docs\",\"description\":\"Documentation for the QZD MVP platform, covering architecture, operations, and API usage.\",\"base\":\"/qzd-mvp/\",\"head\":[],\"router\":{\"prefetchLinks\":true},\"appearance\":true,\"themeConfig\":{\"nav\":[{\"text\":\"Home\",\"link\":\"/\"},{\"text\":\"Docs\",\"link\":\"/architecture\"},{\"text\":\"API\",\"link\":\"/api-readme\"}],\"sidebar\":[{\"text\":\"Overview\",\"items\":[{\"text\":\"Introduction\",\"link\":\"/\"},{\"text\":\"Architecture\",\"link\":\"/architecture\"},{\"text\":\"Goals & Gap Analysis\",\"link\":\"/qzd-goals-and-gap-analysis\"},{\"text\":\"Deployment (Single Server)\",\"link\":\"/deployment-single-server\"},{\"text\":\"Operations Runbook\",\"link\":\"/runbook\"}]},{\"text\":\"Manuals\",\"collapsed\":false,\"items\":[{\"text\":\"Wallet User Manual\",\"link\":\"/manuals/wallet-user\"},{\"text\":\"Admin Operator Manual\",\"link\":\"/manuals/admin-operator\"},{\"text\":\"Merchant Operator Manual\",\"link\":\"/manuals/merchant-operator\"},{\"text\":\"SMS Operator Manual\",\"link\":\"/manuals/sms-operator\"}]},{\"text\":\"Contributing & API\",\"items\":[{\"text\":\"Contributor Guide\",\"link\":\"/contrib\"},{\"text\":\"API Overview\",\"link\":\"/api-readme\"}]}],\"search\":{\"provider\":\"local\"},\"outline\":\"deep\"},\"locales\":{},\"scrollOffset\":134,\"cleanUrls\":false}");</script>
    
  </body>
</html>